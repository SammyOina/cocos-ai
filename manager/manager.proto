// Copyright (c) Ultraviolet
// SPDX-License-Identifier: Apache-2.0

syntax = "proto3";

package manager;

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";

option go_package = "./manager";

service ManagerService {
  rpc Run(RunRequest) returns (RunResponse) {}
}

message RunRequest {
  Computation computation = 1;
  string ca_certs = 2;
  bool client_tls = 3;
  string timeout = 4;
}

message Computation {
  string id = 1;
  string name = 2;
  string description = 3;
  string status = 4;
  string owner = 5;
  google.protobuf.Timestamp start_time = 6;
  google.protobuf.Timestamp end_time = 7;
  repeated Dataset datasets = 8;
  repeated Algorithm algorithms = 9;
  repeated string result_consumers = 10;
  int32 ttl = 11;
  Metadata metadata = 12;
  string timeout = 13;
}

message Dataset {
  string provider = 1;
  string id = 2;
}

message Algorithm {
  string provider = 1;
  string id = 2;
}

message Metadata {
  map<string, google.protobuf.Value> fields = 1;
}

message RunResponse { string ID = 1; }
